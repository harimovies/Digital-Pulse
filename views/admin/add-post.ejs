<a href="/dashboard">&larr; Back</a>
<div class="admin-title">
  <h2>Add New Post</h2>
</div>

<form
  action="/add-post"
  method="POST"
  enctype="multipart/form-data"
  class="form1"
  onsubmit="return validate()"
>
  <label for="articleType"><b>Article Type</b></label>
  <select name="articleType" id="articleType">
    <option value="none">Select a Category</option>
    <% data.forEach(article => { %>
    <option value="<%= article.articleType %>">
      <%= article.articleType %>
    </option>
    <% }) %>
  </select>

  <label for="title"><b>Title</b></label>
  <input type="text" placeholder="Post Title" name="title" id="title" />

  <label for="synopsis"><b>Synopsis</b></label>
  <textarea
    name="synopsis"
    id="synopsis"
    cols="50"
    rows="4"
    placeholder="Synopsis goes here"
  ></textarea>

  <label for="body"><b>Content</b></label>
  <textarea
    name="body"
    id="body"
    cols="50"
    rows="10"
    placeholder="Content of the article"
  ></textarea>

  <label for="image"><b>Choose a image</b></label>
  <input type="file" name="image" id="image" />

  <input type="submit" value="Add" class="btn" name="" id="" />
</form>

<h4 style="color: red" id="er"></h4>

<script defer>
  const wrongValue = document.getElementById("er");
  const articleType = document.getElementById("articleType");
  const title = document.getElementById("title");
  const synopsis = document.getElementById("synopsis");
  const body = document.getElementById("body");
  function validate() {
    // username enter or not
    if (articleType.value === "none" || articleType.value === null) {
      wrongValue.innerHTML =
        '<span class="shape_circle" style="padding: 1px 8px">X</span> Please give the article type';
      return false;
    }

    //validation for title
    if (title.value === "" || title.value === null) {
      wrongValue.innerHTML =
        '<span class="shape_circle" style="padding: 1px 8px">X</span> Please Enter the title';
      return false;
    }
    if (title.value.length < 10) {
      wrongValue.innerHTML =
        '<span class="shape_circle" style="padding: 1px 8px">X</span> Title you given is too short';
      return false;
    }

    //validation for synopsis
    if (synopsis.value === "" || synopsis.value === null) {
      wrongValue.innerHTML =
        '<span class="shape_circle" style="padding: 1px 8px">X</span> Please Enter the Synopsis';
      return false;
    }
    if (synopsis.value.length < 15) {
      wrongValue.innerHTML =
        '<span class="shape_circle" style="padding: 1px 8px">X</span> Synopsis you given is too short';
      return false;
    }

    //validation for body
    if (body.value === "" || body.value === null) {
      wrongValue.innerHTML =
        '<span class="shape_circle" style="padding: 1px 8px">X</span> Please Enter the content for the article';
      return false;
    }
    if (body.value.length < 50) {
      wrongValue.innerHTML =
        '<span class="shape_circle" style="padding: 1px 8px">X</span> Content you given is too short';
      return false;
    }

    //validation for image
    if (image.value === "" || image.value === null) {
      wrongValue.innerHTML =
        '<span class="shape_circle" style="padding: 1px 8px">X</span> Please provide a image for the article';
      return false;
    }

    return true;
  }
</script>
